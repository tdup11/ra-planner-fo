"use strict";(self.webpackChunkRAPlanner=self.webpackChunkRAPlanner||[]).push([[271],{2271:(z,g,r)=>{r.r(g),r.d(g,{RaModule:()=>k});var p=r(9808),h=r(213),t=r(7587),u=r(2025),T=r(8759),f=r(9783),l=r(1745),d=r(1971),x=r(4125),y=r(1087),v=r(4119);function C(o,s){1&o&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th",3),t._uU(3,"\xc9quipe"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"R\xe9sultats"),t.qZA()())}function Z(o,s){1&o&&t._UZ(0,"i",10)}function _(o,s){1&o&&t._UZ(0,"i",11)}function O(o,s){1&o&&t._UZ(0,"i",12)}function R(o,s){if(1&o&&(t.ynx(0)(1,5),t.TgZ(2,"span",6),t.YNc(3,Z,1,0,"i",7),t.YNc(4,_,1,0,"i",8),t.YNc(5,O,1,0,"i",9),t.qZA(),t.BQk()()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngSwitch",e.getOutcome()),t.xp6(1),t.Q6J("pTooltip",n.getResultString(e))("escape",!1),t.xp6(1),t.Q6J("ngSwitchCase",n.outcomeEnum.WIN),t.xp6(1),t.Q6J("ngSwitchCase",n.outcomeEnum.LOSS),t.xp6(1),t.Q6J("ngSwitchCase",n.outcomeEnum.BYE)}}function I(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",3)(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t.YNc(9,R,6,6,"ng-container",4),t.qZA()()),2&o){const e=s.$implicit,n=s.rowIndex,i=t.oxw();t.xp6(2),t.hij(" ",n+1+i.offset*i.maxTeamsPerTable," "),t.xp6(3),t.AsE("",e.playerOne.firstName," ",e.playerOne.lastName,""),t.xp6(2),t.AsE("",e.playerTwo.firstName," ",e.playerTwo.lastName,""),t.xp6(2),t.Q6J("ngForOf",e.results)}}let B=(()=>{class o{constructor(e){this.boardService=e,this.boardId="",this.maxTeamsPerTable=8,this.offset=0,this.board=d.$.empty(),this.allTeams=[],this.subscriptions=[],this.outcomeEnum=l.j}ngOnInit(){this.boardId&&this.subscriptions.push(this.boardService.getBoard(this.boardId).subscribe(e=>{const n=d.$.deepCopy(e);this.sortTeamsByRank(n),this.allTeams=n.teams.map(x.S.deepCopy),n.teams=n.teams.slice(this.maxTeamsPerTable*this.offset,this.maxTeamsPerTable*(this.offset+1)),this.board=n}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}sortTeamsByRank(e){e.teams.sort((n,i)=>{const a=n.getOutcomes(),m=i.getOutcomes();if(a.length>m.length)return-1;if(a.length<m.length)return 1;for(let c=0;c<a.length;c++){if(a[c]!==l.j.WIN&&m[c]===l.j.WIN)return 1;if(a[c]===l.j.WIN&&m[c]!==l.j.WIN)return-1}for(let c=0;c<a.length;c++){if(a[c]===l.j.BYE&&m[c]!==l.j.BYE)return-1;if(a[c]!==l.j.BYE&&m[c]===l.j.BYE)return 1}return n.id.localeCompare(i.id)})}getResultString(e){const n=(0,l.M)(e.getOutcome()),i=this.allTeams.find(a=>a.id===e.opponentId);return n+" contre <br>"+i.playerOne.getShortFullName()+" - "+i.playerTwo.getShortFullName()+"<br>"+e.sets.map(a=>a.toString()).reduce((a,m,c,G)=>a+", "+m)+"<br>"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-board-table"]],inputs:{boardId:"boardId",maxTeamsPerTable:"maxTeamsPerTable",offset:"offset"},decls:3,vars:1,consts:[[3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"p-1"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"pTooltip","escape"],["class","fas fa-circle-check ml-1 win-color",4,"ngSwitchCase"],["class","fa-solid fa-circle-xmark ml-1 loss-color",4,"ngSwitchCase"],["class","fa-solid fa-circle-minus ml-1 bye-color",4,"ngSwitchCase"],[1,"fas","fa-circle-check","ml-1","win-color"],[1,"fa-solid","fa-circle-xmark","ml-1","loss-color"],[1,"fa-solid","fa-circle-minus","ml-1","bye-color"]],template:function(e,n){1&e&&(t.TgZ(0,"p-table",0),t.YNc(1,C,6,0,"ng-template",1),t.YNc(2,I,10,6,"ng-template",2),t.qZA()),2&e&&t.Q6J("value",n.board.teams)},directives:[y.iA,f.jx,p.sg,p.RF,v.u,p.n9],styles:[""]}),o})();const S=["carousel"];function A(o,s){if(1&o&&(t.TgZ(0,"div",3)(1,"h2",4),t._uU(2),t.qZA(),t._UZ(3,"app-board-table",5),t.qZA()),2&o){const e=s.$implicit;t.xp6(2),t.hij("Tableau ",e.boardId,""),t.xp6(1),t.Q6J("boardId",e.boardId)("maxTeamsPerTable",e.maxTeamsPerTable)("offset",e.offset)}}let w=(()=>{class o{constructor(e,n){this.boardService=e,this.changeDetectorRef=n,this.carousel=null,this.reducedResults=[],this.maxTeamsPerTable=8,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.boardService.getAllBoardIds().subscribe(e=>{this.reducedResults=[],e.forEach(n=>{this.boardService.getBoard(n).subscribe(i=>{for(let a=0;a<Math.ceil(i.teams.length/this.maxTeamsPerTable);a++)this.reducedResults.push(new M(n,this.maxTeamsPerTable,a))})})}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}ngAfterContentChecked(){this.changeDetectorRef.detectChanges(),this.carousel&&(this.carousel.stopAutoplay(),this.carousel.startAutoplay())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.$),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ra-results"]],viewQuery:function(e,n){if(1&e&&t.Gf(S,5),2&e){let i;t.iGM(i=t.CRH())&&(n.carousel=i.first)}},decls:3,vars:3,consts:[[3,"value","autoplayInterval","circular"],["carousel",""],["pTemplate","item"],[1,"flex","flex-column"],[1,"align-self-center","mt-0"],[3,"boardId","maxTeamsPerTable","offset"]],template:function(e,n){1&e&&(t.TgZ(0,"p-carousel",0,1),t.YNc(2,A,4,4,"ng-template",2),t.qZA()),2&e&&t.Q6J("value",n.reducedResults)("autoplayInterval",1e4)("circular",!0)},directives:[T.l,f.jx,B],styles:[""]}),o})();class M{constructor(s,e,n){this.boardId=s,this.maxTeamsPerTable=e,this.offset=n}}var F=r(845),b=r(727),N=r(97),U=r(7010);function Q(o,s){if(1&o&&(t.TgZ(0,"div",1)(1,"span",6),t._uU(2),t.qZA(),t.TgZ(3,"span",3),t._uU(4,"-"),t.qZA(),t.TgZ(5,"p-inputNumber",7),t._uU(6),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.selfScore),t.xp6(4),t.Oqu(e.opponentScore)}}let Y=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ongoing-match"]],inputs:{match:"match",teamOne:"teamOne",teamTwo:"teamTwo"},decls:15,vars:5,consts:[[1,"flex","flex-column","gap-1"],[1,"grid"],[1,"col-5"],[1,"col-2","align-self-center","text-center"],[1,"col-5","text-right"],["class","grid",4,"ngFor","ngForOf"],[1,"col-5","justify-content-start"],[1,"col-5","justify-content-end"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"span",3),t._uU(8,"-"),t.qZA(),t.TgZ(9,"div",4)(10,"p"),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA()()(),t.YNc(14,Q,7,2,"div",5),t.qZA()),2&e&&(t.xp6(4),t.Oqu(n.teamOne.playerOne.getShortFullName()),t.xp6(2),t.Oqu(n.teamOne.playerTwo.getShortFullName()),t.xp6(5),t.Oqu(n.teamTwo.playerOne.getShortFullName()),t.xp6(2),t.Oqu(n.teamTwo.playerTwo.getShortFullName()),t.xp6(1),t.Q6J("ngForOf",n.match.sets))},directives:[p.sg,U.Rn],styles:[""]}),o})();function J(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"app-ongoing-match",3),t.BQk()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("match",e)("teamOne",n.getTeam(e.teamOneId))("teamTwo",n.getTeam(e.teamTwoId))}}let q=(()=>{class o{constructor(e){this.boardService=e,this._boardId="",this.board=d.$.empty(),this.turnMessage=[],this.currentBoardSubscription=new b.w0}set boardId(e){this._boardId=e,this.currentBoardSubscription.unsubscribe(),this.currentBoardSubscription=this.getBoardSubscription(e)}get boardId(){return this._boardId}ngOnInit(){this.currentBoardSubscription=this.getBoardSubscription(this.boardId)}ngOnDestroy(){this.currentBoardSubscription.unsubscribe()}getBoardSubscription(e){return e?this.boardService.getBoard(e).subscribe(n=>{this.board=d.$.deepCopy(n),this.turnMessage=this.board.isFinished()?[{severity:"error",summary:"Tour "+this.board.turn+" sur "+this.board.turnsToBePlayed,icon:"fa-solid fa-circle-stop"}]:[{severity:"success",summary:"Tour "+this.board.turn+" sur "+this.board.turnsToBePlayed,icon:"fa-solid fa-circle-play"}]}):new b.w0}getTeam(e){return this.board.teams.find(n=>n.id===e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-board-ongoing-matches"]],inputs:{boardId:"boardId"},decls:3,vars:3,consts:[[3,"value","closable"],[1,"two-items-grid"],[4,"ngFor","ngForOf"],[3,"match","teamOne","teamTwo"]],template:function(e,n){1&e&&(t._UZ(0,"p-messages",0),t.TgZ(1,"div",1),t.YNc(2,J,2,3,"ng-container",2),t.qZA()),2&e&&(t.Q6J("value",n.turnMessage)("closable",!1),t.xp6(2),t.Q6J("ngForOf",n.board.ongoingMatches))},directives:[N.V,p.sg,Y],styles:[".two-items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-auto-rows:minmax(0,auto);grid-column-gap:1rem;column-gap:1rem;grid-row-gap:2rem;row-gap:2rem}"]}),o})();const P=function(o){return{"p-button-outlined":o}};function j(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",4),t.NdJ("click",function(i){const m=t.CHM(e).$implicit;return t.oxw().onClick(i,m)}),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("label",e)("ngClass",t.VKq(2,P,e!==n.selectedId))}}function E(o,s){if(1&o&&t._UZ(0,"app-board-ongoing-matches",5),2&o){const e=t.oxw();t.Q6J("boardId",e.selectedId)}}let $=(()=>{class o{constructor(e){this.boardService=e,this.boardIds=[],this.selectedId="",this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.boardService.getAllBoardIds().subscribe(e=>{this.boardIds=e.slice()}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}onClick(e,n){this.selectedId=String(n)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ra-matches"]],decls:4,vars:2,consts:[[1,"flex","flex-column","gap-2","align-items-center"],[1,"flex","gap-1"],[4,"ngFor","ngForOf"],["class","mx-2",3,"boardId",4,"ngIf"],["pButton","",3,"label","ngClass","click"],[1,"mx-2",3,"boardId"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,j,2,4,"ng-container",2),t.qZA(),t.YNc(3,E,1,1,"app-board-ongoing-matches",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",n.boardIds),t.xp6(1),t.Q6J("ngIf",n.selectedId))},directives:[p.sg,F.Hq,p.mk,p.O5,q],styles:[""]}),o})();const D=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ra"]],decls:5,vars:0,consts:[[1,"grid","mt-3"],[1,"col-6"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-ra-results"),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"app-ra-matches"),t.qZA()())},directives:[w,$],styles:[""]}),o})()}];let X=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(D)],h.Bz]}),o})();var W=r(6997);let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,X,W.m]]}),o})()}}]);